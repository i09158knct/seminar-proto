<h1 id="page-user-name"><%= @user.name %></h1>
<div id="extra-links-container"></div>
<table class="table table-bordered table-hover">
  <thead>
    <tr>
      <th>Challenge Title</th>
      <th>Answers</th>
    </tr>
  </thead>
  <tbody>
    <% @challenges.each do |challenge| %>
      <tr>
        <td><%= link_to challenge.title, challenge %></td>
        <td><%= link_to challenge.answers.count, challenge_answers_path(challenge) %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<table class="table table-bordered table-hover">
  <thead>
    <tr>
      <th>Answer Title</th>
      <th>Challenge</th>
    </tr>
  </thead>
  <tbody>
    <% @answers.each do |answer| %>
    <tr>
      <td><%= link_to answer.title, [answer.challenge, answer] %></td>
      <td><%= link_to answer.challenge.title, answer.challenge %></td>
    </tr>
    <% end %>
  </tbody>
</table>

<script type="text/javascript">
  jQuery(function($) {
    var
      currentUserName = SeminarProto.getCurrentUserName(),
      pageUserName = $("#page-user-name").text(),
      buildLink = SeminarProto.buildLink,
      managementLink;

    if (pageUserName === currentUserName) {
      managementLink = buildLink("Go to Dashboard", "/management/index", "lead");
      $("#extra-links-container").append(managementLink);
    }
  });
</script>